{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/chid/Desktop/RWA-Assignment/src/app/manager/page.js"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\n\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport Paper from '@mui/material/Paper';\nimport Box from '@mui/material/Box';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport { LineChart } from '@mui/x-charts/LineChart';\n\nconst main_colour = '#FF0000';\n\nfunction StatCard({ label, value }) {\n    return (\n        <Paper\n            sx={{\n                p: 2,\n                textAlign: 'center',\n                minHeight: 120,\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n            }}\n        >\n            <Typography variant=\"subtitle2\">{label}</Typography>\n            <Typography variant=\"h5\" sx={{ mt: 1 }}>\n                {value}\n            </Typography>\n        </Paper>\n    );\n}\n\nexport default function ManagerPage() {\n    const router = useRouter();\n    const [stats, setStats] = React.useState({\n        totalOrders: 0,\n        totalRevenue: 0,\n        totalItemsSold: 0,\n    });\n    const [orders, setOrders] = React.useState([]);\n\n    React.useEffect(() => {\n        fetch('/api/manager')\n            .then((res) => res.json())\n            .then((data) => {\n                setStats(data.stats || { totalOrders: 0, totalRevenue: 0, totalItemsSold: 0 });\n                setOrders(Array.isArray(data.orders) ? data.orders : []);\n            })\n            .catch(console.error);\n    }, []);\n\n    // Prepare data for the revenue line chart\n    const revenueChart = React.useMemo(() => {\n        if (!orders.length) {\n            return { labels: [], values: [] };\n        }\n\n        // sort by createdAt so the line goes in time order\n        const sorted = [...orders].sort((a, b) =>\n            new Date(a.createdAt || 0) - new Date(b.createdAt || 0)\n        );\n\n        const labels = sorted.map((order, index) =>\n            order.createdAt\n                ? new Date(order.createdAt).toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit',\n                })\n                : `#${index + 1}`\n        );\n\n        const values = sorted.map((order) => Number(order.total || 0));\n\n        return { labels, values };\n    }, [orders]);\n\n    const handleLogout = () => {\n        if (typeof window !== 'undefined') {\n            window.localStorage.removeItem('currentUser');\n        }\n        router.push('/login');\n    };\n\n    return (\n        <>\n            <AppBar position=\"static\" sx={{ bgcolor: main_colour }}>\n                <Toolbar>\n                    <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\n                        Manager Dashboard\n                    </Typography>\n                    <IconButton color=\"inherit\" onClick={handleLogout}>\n                        <LogoutIcon />\n                    </IconButton>\n                </Toolbar>\n            </AppBar>\n\n            <Container sx={{ mt: 4 }} maxWidth=\"lg\">\n                {/* Top stats – centered */}\n                <Box\n                    sx={{\n                        display: 'flex',\n                        justifyContent: 'center',\n                        gap: 3,\n                        flexWrap: 'wrap',\n                        mb: 4,\n                    }}\n                >\n                    <Grid container spacing={3} justifyContent=\"center\">\n                        <Grid item xs={12} md={4}>\n                            <StatCard\n                                label=\"Total Revenue Today\"\n                                value={`€${stats.totalRevenue.toFixed(2)}`}\n                            />\n                        </Grid>\n                        <Grid item xs={12} md={4}>\n                            <StatCard label=\"Total Orders Today\" value={stats.totalOrders} />\n                        </Grid>\n                    </Grid>\n                </Box>\n\n                {/* Revenue line chart */}\n                <Box sx={{ mb: 4 }}>\n                    <Typography variant=\"h6\" gutterBottom>\n                        Revenue per Order\n                    </Typography>\n                    <Paper sx={{ p: 2 }}>\n                        <LineChart\n                            height={300}\n                            xAxis={[{ data: revenueChart.labels }]}\n                            series={[\n                                {\n                                    data: revenueChart.values,\n                                    label: 'Order total (€)',\n                                },\n                            ]}\n                        />\n                    </Paper>\n                </Box>\n\n                {/* Recent orders table */}\n                <Box sx={{ mb: 4 }}>\n                    <Typography variant=\"h6\" gutterBottom>\n                        Recent Orders\n                    </Typography>\n                    <Paper>\n                        <Table size=\"small\">\n                            <TableHead>\n                                <TableRow>\n                                    <TableCell>Order ID</TableCell>\n                                    <TableCell>Customer</TableCell>\n                                    <TableCell>Placed At</TableCell>\n                                    <TableCell align=\"right\">Total (€)</TableCell>\n                                </TableRow>\n                            </TableHead>\n                            <TableBody>\n                                {orders.map((order) => (\n                                    <TableRow key={order._id}>\n                                        <TableCell>{order._id}</TableCell>\n                                        <TableCell>{order.email}</TableCell>\n                                        <TableCell>\n                                            {order.createdAt\n                                                ? new Date(order.createdAt).toLocaleString()\n                                                : ''}\n                                        </TableCell>\n                                        <TableCell align=\"right\">\n                                            {Number(order.total).toFixed(2)}\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                        </Table>\n                    </Paper>\n                </Box>\n            </Container>\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}