{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/chid/Desktop/RWA-Assignment/src/app/api/manager/route.js"],"sourcesContent":["export async function GET() {\n    const { MongoClient } = require('mongodb');\n    const url = 'mongodb+srv://chidozieonyejelem1_db_user:4hHD8SMxyCNCPl6e@cluster0.tk6on5o.mongodb.net/?appName=Cluster0';\n    const client = new MongoClient(url);\n    const dbName = 'app';\n\n    await client.connect();\n    console.log('Connected successfully to server (manager)');\n    const db = client.db(dbName);\n    const ordersCollection = db.collection('orders');\n\n    const orders = await ordersCollection\n        .find({})\n        .sort({ createdAt: -1 })\n        .toArray();\n\n    const totalOrders = orders.length;\n    const totalRevenue = orders.reduce(\n        (sum, o) => sum + (o.total || 0),\n        0\n    );\n    const totalItemsSold = orders.reduce((sum, o) => {\n        const items = o.items || [];\n        return (\n            sum +\n            items.reduce((s, item) => s + (item.quantity || 1), 0)\n        );\n    }, 0);\n\n    const serialised = orders.map((o) => ({\n        ...o,\n        _id: o._id.toString(),\n        createdAt: o.createdAt ? o.createdAt.toISOString() : null,\n    }));\n\n    return Response.json({\n        stats: { totalOrders, totalRevenue, totalItemsSold },\n        orders: serialised,\n    });\n}"],"names":[],"mappings":";;;;AAAO,eAAe;IAClB,MAAM,EAAE,WAAW,EAAE;IACrB,MAAM,MAAM;IACZ,MAAM,SAAS,IAAI,YAAY;IAC/B,MAAM,SAAS;IAEf,MAAM,OAAO,OAAO;IACpB,QAAQ,GAAG,CAAC;IACZ,MAAM,KAAK,OAAO,EAAE,CAAC;IACrB,MAAM,mBAAmB,GAAG,UAAU,CAAC;IAEvC,MAAM,SAAS,MAAM,iBAChB,IAAI,CAAC,CAAC,GACN,IAAI,CAAC;QAAE,WAAW,CAAC;IAAE,GACrB,OAAO;IAEZ,MAAM,cAAc,OAAO,MAAM;IACjC,MAAM,eAAe,OAAO,MAAM,CAC9B,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,GAC/B;IAEJ,MAAM,iBAAiB,OAAO,MAAM,CAAC,CAAC,KAAK;QACvC,MAAM,QAAQ,EAAE,KAAK,IAAI,EAAE;QAC3B,OACI,MACA,MAAM,MAAM,CAAC,CAAC,GAAG,OAAS,IAAI,CAAC,KAAK,QAAQ,IAAI,CAAC,GAAG;IAE5D,GAAG;IAEH,MAAM,aAAa,OAAO,GAAG,CAAC,CAAC,IAAM,CAAC;YAClC,GAAG,CAAC;YACJ,KAAK,EAAE,GAAG,CAAC,QAAQ;YACnB,WAAW,EAAE,SAAS,GAAG,EAAE,SAAS,CAAC,WAAW,KAAK;QACzD,CAAC;IAED,OAAO,SAAS,IAAI,CAAC;QACjB,OAAO;YAAE;YAAa;YAAc;QAAe;QACnD,QAAQ;IACZ;AACJ"}}]
}